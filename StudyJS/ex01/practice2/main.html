<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title> 입장료 계산기 </title>
    <link rel="stylesheet" href="styles.css">
    <script src="moment.min.js"></script>
</head>

<body>
    <div class="container">
        <h1> 입장료 계산기 </h1>
        <div id="time"></div>

        <div class="row">
            <div class="col-3">
                <p>성　인<input type="text" value="" id="adultInput">명</p>
                <p>어린이<input type="text" value="" id="childInput">명</p>
                <div>
                    <p>단체할인에 해당하십니까?</p>
                    <input type="radio" name="group" value="yes"><span>예</span>
                    <input type="radio" name="group" value="no" checked><span>아뇨</span>
                </div>
            </div>
            <div class="col">
                <button onclick="calc()">확인</button>
            </div>
            <div class="col" id="output">
                <img src="../img/good.png" id="outputImg">
            </div>
        </div>
        <div class="info">
            <p>성　인 1인당<input type="text" value="20000" id="adultFee" readonly style="border:none">원</p>
            <p>어린이 1인당<input type="text" value="9900" id="childFee" readonly style="border:none">원</p>
            <p>단 체 할 인<span>5명 이상 20%</span></p>
        </div>
        <div class="info">
            <p>성　인 1인당<input type="text" value="12000" id="adultNgtFee" readonly style="border:none">원</p>
            <p>어린이 1인당<input type="text" value="4500" id="childFee" readonly style="border:none">원</p>
            <p>단 체 할 인<span>5명 이상 20%</span></p>
        </div>

    </div>
    <script>
        //현재시간
        const time = document.querySelector('#time');
        setInterval(() => {
            const curTime = moment().format('YYYY/MM/DD HH:mm:ss');
            time.innerHTML = `<p> ${curTime} </p>`;
        }, 1000);

        function calc() {
            const adultFeeStr = document.querySelector('#adultFee');
            const childFeeStr = document.querySelector('#childFee');
            const adultFee = Number(adultFeeStr.value);
            const childFee = Number(childFeeStr.value);
            const adultInput = document.querySelector('#adultInput');
            const childInput = document.querySelector('#childInput');
            const adultInputStr = adultInput.value;
            const childInputStr = childInput.value;
            const adultCnt = Number(adultInputStr);
            const childCnt = Number(childInputStr);

            const radios = document.getElementsByName('group');
            const selected = Array.from(radios).find(elem => elem.checked);

            const output = document.querySelector('#output');
            const outputImg = document.querySelector('#outputImg');

            if (isNaN(adultCnt) || isNaN(childCnt)) {
                output.innerHTML = `<p> 숫자만 입력하세요! </p>`;
                //outputImg.src = '../img/bad.png';
                return;
            }

            let totalFee = 0;
            if (selected.value == 'no') {
                totalFee = (adultFee * adultCnt) + (childFee * childCnt);
            } else {
                totalFee = ((adultFee * adultCnt) + (childFee * childCnt)) * 0.8;
            }

            output.innerHTML = `<p> 총 ${totalFee} 원 </p>`;
            //outputImg.src = '../img/good.png';
        }
    </script>
</body>

</html>